<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Squad Manager</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>
</body>
</html>
<!--
<pre>
Perks example
Soldier (3x Hex + 3x Hex repeating):
- SquadId (1x Hex)
- ClassCombo (2 Hex)
	- ClassId (1x Hex)
	- Level (1x hex)
- Perks (repeating, 3x Hex)
	- PerkId (2x hex)
	- level	(1x hex)
</pre>
<script>
  const test = 1295;
  console.log('test: t, ', test.toString(36));
function makeMinLength(string, length){
  // lz compression: https://www.npmjs.com/package/lz-string
  if(string.length > length){
    throw new Error();
  }
  while(string.length < length){
    string = "0" + string;
  }
  return string;
}
const soldier = {
  squadId: 15,
  class: {
    id: 10,
    level: 2
  },
  perks: [
    {
      id: 95,
      level: 3
    },
    {
      id: 165,
      level: 2
    },
    {
      id: 15,
      level: 8
    },
    {
      id: 5,
      level: 1
    },
    {
      id: 174,
      level: 1
    },
    {
      id: 127,
      level: 7
    }
  ],
  //	[##]	 [#]	  [#]		[##]     [#]
  // squadId-classId-classLevel-[perkId-perkAmount]
  encode: function(){
    let tmpString = "";
    tmpString += makeMinLength(this.squadId.toString(36), 1);
    tmpString += makeMinLength(this.class.id.toString(36), 1);
    tmpString += makeMinLength(this.class.level.toString(36), 1);
    this.perks.forEach(perk => {
      tmpString += makeMinLength(perk.id.toString(36), 2);
      tmpString += makeMinLength(perk.level.toString(36), 1);
    });
    return tmpString;
  },
  decode: function(hash){
    //Check for valid hash
    if(hash.length % 3 !== 0){
      console.error("rong: ", hash.length % 3);
    } else {
      const classHash = hash.slice(0, 3)
      const perksHash = hash.slice(3);
      const squadId = parseInt(classHash.slice(0, 1), 36);
      console.log("squadId: ", squadId);
      const classId = parseInt(classHash.slice(1, 2), 36);
      console.log("classId: ", classId);
      const classLvl = parseInt(classHash.slice(2, 3), 36);
      console.log("classLvl: ", classLvl);
      const perkArray = perksHash.match(/.{1,3}/g);
      console.log('perkArr: ', perkArray);
      perkArray.forEach(perk => {
        const perkId = parseInt(perk.slice(0,2), 36);
        console.log("perkId: ", perkId);
        const perkLevel = parseInt(perk.slice(2), 36);
        console.log("perkLevel: ", perkLevel);
      })
    }
  }
};

  const code = soldier.encode();
  console.log(code);
  soldier.decode(code);
</script>
-->
